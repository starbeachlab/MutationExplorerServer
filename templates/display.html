


{% block content %}
<section>
    <center>
          <div id="viewport" style="width:100%; height:100%;"></div>
    </center>
</section>
{% endblock %}


{% block scripts %}

<script src="{{url_for('static', filename='ngl.js')}}"></script>


<script> 
    NGL.mainscriptPathFile = "{{url_for('static', filename='ngl.js')}}";

    document.addEventListener( "DOMContentLoaded",  function() {

        stage = new NGL.Stage("viewport");
        stage.setParameters( { backgroundColor: "white" } );
        var loc = window.location;
        var file = loc.protocol + "//" + loc.host + "{{url_for('get', mydir=path, pdb=pdb)}}";
        //console.log( file );
        
        // load molecule structure
        stage.loadFile( file, {defaultRepresentation: false} ).then( function( comp){
            // console.log( "loaded file: " + file);
            comp.setName( "structure");
            //comp.setSelection( "");
            comp.addRepresentation( "cartoon", {color: "bfactor" , colorReverse: true} );
            comp.autoView();
        });
    
    });
    
</script>

{% endblock %}


