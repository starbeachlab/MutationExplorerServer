{% extends "base.html" %}

{% block content %}

<center>
<br>
<h3>Upload structure or model</h3>



<br>
<p> Choose one of the following options: </p>
</center>



<form id="submitForm" method="POST" enctype="multipart/form-data" class="row">
                
<div class="col offset-s3 s6">
    <div style="width: 100%; display: flex; justify-content: center">
    <div class="file-field input-field" style="width: 100%">
        <div class="btn" style="width: 100%">
            <span>Upload a PDB file</span>
            <input id="pdb-upl" type="file" name="pdbfile">
        </div>
    </div>
    </div>
</div>


<div class="input-field col offset-s3 s6">
    <input id="chain" type="text" name="pdbid" class="validate" placeholder="PDB ID (without '.pdb' ending)">
    <label for="chain">Load structure from PDB</label>
</div>

<div class="input-field col offset-s3 s6">
    <input id="chain" type="text" name="alphafoldid" class="validate" placeholder="Uniprot ID">
    <label for="chain">Load prediction from AlphaFold DB</label>
</div>

<div class="col offset-s3 s6 center-align">
    <span id="error-msg">{{error}}</span>
</div>

<div class="col offset-s3 s6 center-align">
<input id="submit-btn" type="submit" value="Next: input mutations" class="btn">
<br>
<br>
<br>
<a href="{{url_for('load_example', tag='1lib')}}" class="btn-small grey lighten-1">load example</a>
</div>

</form>



{% endblock %}

{% block scripts %}

<script>

    function showFilename() {
        var fname = $(this).val().replace(/^.*[\\\/]/, '')
        $(this).parent().parent().find(".filename").html(fname)
    }

    function initUploads() {
        var uploads = $(".file-field")
        for (i = 0; i < uploads.length; i++) {
            $(uploads[i]).append('<center><div class="filename"></div></center>')
            $($(uploads[i]).find("input")).on("change", showFilename)
        }
    }

    initUploads()

    /*
    $("#pdb-upl").parent().parent().append('<center><div class="filename"></div></center>');

    $("#pdb-upl").on("change", function() {
        var fname = $(this).val().replace(/^.*[\\\/]/, '')
        $(this).parent().parent().find(".filename").html(fname)
    })*/

</script>

{% endblock %}
